В любой вычислительной машине независимо от архитектуры программы и данные хранятся в памяти. Функции памяти обеспечиваются запоминающими устройствами (ЗУ).  
## Основные характеристики ЗУ
- **Месторасположение**:
	- **Процессорные** - наиболее скоростные виды памяти обычно размещаются на общем кристалле с процессором. 
	- **Внутренние** - располагается на системной плате
	- **Внешние** - медленные ЗУ с большой емкостью, т. к. к ядру вычислительной машины они подключаются аналогично устройствам ввода-вывода
- **Ёмкость** - характеризуют числом битов или байтов, которые могут хранится в ЗУ
- **Единица пересылки**:
	- Для основной памяти определяется шириной шины данных, т. е. количеством битов, передаваемых по линиям шины параллельно. Чаще всего единица пересылки равна длине слова 
	- Применительно к внешней памяти данные передаются единицами, превышающими длину слова и называемыми **блоками**
- **Метод доступа**:
	- **Последовательный доступ** - информация хранится в виде последовательности битов данных, называемых **записями**. Для доступа к нужному элементу необходимо прочитать все предшествующие ему данные. Время доступа зависит от положения требуемой записи на носителе и позиции элемента внутри записи.
	- **Прямой доступ** - каждая запись имеет уникальный адрес, обращение к элементу осуществляется как адресный доступ к началу записи с последующим последовательным доступом к искомому элементу.
	- **Произвольный доступ** - каждая ячейка памяти имеет уникальный физический адрес. Обращение к любой ячейке занимает одно и то же время и производится в произвольной очередности. 
	- **Ассоциативный доступ** - позволяет выполнять поиск ячеек, содержащих информацию, в которой значения отдельных битов совпадают с состоянием одноименных битов в образце. Сравнение осуществляется параллельно для всех ячеек памяти, независимо от ее емкости.
- **Быстродействие** - для количественной оценки быстродействия используются 3 параметра:
	- **Время доступа** $T_Д$ - для памяти с произвольным доступом время доступа соответствует интервалу времени от момента поступления адреса до момента, когда данные заносятся в память или становятся доступны пользователю. Для ЗУ с последовательным или прямым доступом $T_Д$ - это время, затрачиваемое на установку головки в нужную позицию. 
	- **Длительность цикла (период обращения)** $T_Ц$ - существует только для памяти с произвольным доступом. Длительность цикла - это минимальное время между 2 последовательными обращениями к памяти. Включает в себя время доступа + дополнительное время, которое может потребоваться для затухания сигналов в машине или для восстановления считанной информации, если во время операции она была разрушена
	- **Скорость передачи** $V_П$ - это скорость, с которой данные могут передаваться в память и из нее. Для памяти с произвольным доступом $V_П=\frac{1}{T_Ц}$. Для других видов памяти скорость передачи определяется соотношением $T_N=T_Д+\frac{N}{V_П}$, где $T_N$ - среднее время считывания или записи $N$
- **Физический тип** - при определении физического типа существуют 3 наиболее распространенные технологии ЗУ:
	- Полупроводниковая
	- Оптическая
	- Магнитная
- **Физические особенности** - энергозависимость
- **Стоимость** - принято оценивать отношением общей стоимости запоминающего устройства к его емкости в битах
## Иерархия ЗУ
![Иерархия запоминающих устройств](../Pictures/03_01.%20Иерархия%20запоминающих%20устройств.png)  
Память часто называют узким местом вычислительной машины из-за ее серьезного отставания в быстродействии от процессора. При анализе запоминающих устройств выявили закономерность - чем меньше время доступа, тем выше стоимость хранения 1 бита, и чем больше емкость, тем ниже стоимость хранения 1 бита, но больше время доступа.  
Иерархическая память состоит из ЗУ различных типов, которые в зависимости от характеристик относят к тому или иному уровню иерархии. Уровни иерархии взаимосвязаны, т. е. все данные на одном уровне могут быть найдены на более низком уровне.  
4 верхних уровня иерархии образуют внутреннюю память машины, а все нижние уровни - внешнюю память. По мере движения вниз по иерархии:
1. Уменьшается соотношение стоимость-вид
2. Увеличивается емкость
3. Растет время доступа
4. Уменьшается частота обращения к памяти со стороны процессора
  
Если память организована в соответствии с п. 1-3, а характер размещения в ней данных и команд удовлетворяет п. 4, то иерархическая организация памяти ведет к уменьшению общей стоимости при заданной производительности. Справедливость этого утверждения вытекает из принципа локальности по обращению, которое объединяет 3 вида локальности:
1. С очень высокой вероятностью адрес очередной команды программы либо следует непосредственно за адресом текущей команды, либо адрес расположен около нее. Такое расположение адресов называется **пространственной локальностью программы**. 
2. Обрабатываемые данные, как правило, структурированы и хранятся в последовательных ячейках памяти. Этот тип называется **пространственной локальностью данных**
3. Программа содержит множество небольших циклов и подпрограмм. Т. е., небольшие наборы команд могут многократно повторятся в течение некоторого времени. Это называется **временной локальностью**
  
На каждом уровне иерархии информация разбивается на блоки, выступающие в качестве наименьшей информационной единицы, пересылаемой между соседними уровнями. Размер блоков может быть фиксированным или переменным. При фиксированном размере блока общая емкость обычно кратна его размера. Размер блоков на каждом уровне различен и увеличивается от верхних уровней к нижним. При доступе к командам и данным сначала производится поиск на верхнем уровне иерархии. Факт обнаружения нужной информации называется **попаданием** (**hit**), в противном случае говорят о **промахе** (**miss**). При промахе производится поиск в ЗУ более низкого уровня, где также возможно попадание или промах. После обнаружения необходимой информации выполняется последовательная пересылка блока с нужной информацией с нижних уровней на верхние. При оценке эффективности подобной организации памяти используют следующие характеристики:
- **Коэффициент попаданий (hit rate)** - это отношение числа обращений к памяти, при которых произошло попадание, к общему числу обращений к ЗУ данного уровня
- **Коэффициент промахов (miss rate)** - это отношение числа обращений к памяти, при которых произошел промах, к общему числу обращений к ЗУ данного уровня
- **Время обращения при попадании (hit time)** - это время, необходимое для поиска нужной информации в памяти данного уровня (включая выяснение, промах или попадание) + время на фактическое считывание данных
- **Потери на промах (miss penalty)** - это время, требуемое для замены блоков в памяти более высокого уровня на блок с нужными данными, расположенными на более низком уровне. Потери на промах включают в себя **время доступа** (**access time**, время обращения к 1 слову блока) и **время пересылки** (**transfer time**) для пересылки оставшихся слов блока. Время доступа обусловлено задержкой памяти более низкого уровня, а время пересылки связано с полосой пропускания канала между запоминающими устройствами соседних уровней
  
При описании любого уровня иерархии используют 4 термина:
1. **Размещение блока** - это допустимое место расположения блока на примыкающем сверху уровне иерархии
2. **Идентификация блока** - это способ нахождения блока на примыкающем сверху уровне
3. **Замещение блока** - это выбор блока, заменяемого при промахе с целью освобождения места для нового блока
4. **Согласование копий (стратегия записей)** - это обеспечение согласованности копий одних и тех же блоков, расположенных на разных уровнях, при записи новой информации в копию, находящуюся на более высоком уровне