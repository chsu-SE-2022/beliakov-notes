Написать приложение, позволяющее создавать целочисленный бинарный файл, выводить его в многострочный редактор текстов или таблицу, а также производить указанные действия (создание, вывод и операции совсем не обязательно должны выполняться последовательно: пользователь может выбрать ранее созданный файл). Количество чисел в создаваемом файле задается случайным  образом из диапазона 1..n, где n вводится. Имя файла для создания и обработки запрашивается с помощью диалоговых окон. После создания или выбора файла его элементы выводятся. Программа должна выдавать ответ  при любых введенных пользователем данных. Интерфейс программы (используется фреймворк Vaadin), кроме оговоренных моментов произвольный, максимально удобный для пользователя и по возможности эстетичный.

# Вариант 5
Вывести в порядке возрастания взаимно простые числа из файла. Ввод в файл ручной

# Исходный код
```java
@Route("")
public class MainView extends VerticalLayout {

    private final TextArea outputArea = new TextArea("Содержимое файла");
    private final TextArea primesArea = new TextArea("Взаимно простые числа");
    private final IntegerField nField = new IntegerField("Макс количество чисел (n)");
    private final IntegerField aField = new IntegerField("Диапазон a");
    private final IntegerField bField = new IntegerField("Диапазон b");

    public MainView() {
        setSizeFull();
        setPadding(true);
        setSpacing(true);
        outputArea.setWidthFull();
        outputArea.setHeight("200px");
        primesArea.setWidthFull();
        primesArea.setHeight("150px");

        nField.setValue(100);
        aField.setValue(0);
        bField.setValue(1000);

        Button createFileBtn = new Button("Создать файл");
        Button openFileBtn = new Button("Открыть файл и показать");
        Button showPrimesBtn = new Button("Показать взаимно простые числа");

        createFileBtn.addClickListener(e -> showFileNameDialog("Создать файл", this::createFile));
        openFileBtn.addClickListener(e -> showFileNameDialog("Открыть файл", this::openFile));
        showPrimesBtn.addClickListener(e -> showFileNameDialog("Показать простые числа", this::showMutualPrimes));

        add(nField, aField, bField,
                createFileBtn, openFileBtn, showPrimesBtn,
                new Label("Содержимое файла:"), outputArea,
                new Label("Взаимнопростые числа:"), primesArea);
    }

    private void showFileNameDialog(String title, java.util.function.Consumer<String> action) {
        Dialog dialog = new Dialog();
        dialog.setWidth("300px");
        dialog.setCloseOnEsc(true);
        dialog.setCloseOnOutsideClick(false);

        TextField fileNameInput = new TextField("Имя файла");
        fileNameInput.setWidthFull();

        Button okButton = new Button("OK", event -> {
            String fileName = fileNameInput.getValue();
            if (fileName == null || fileName.trim().isEmpty()) {
                Notification.show("Введите имя файла");
                return;
            }
            dialog.close();
            action.accept(fileName.trim());
        });

        Button cancelButton = new Button("Отмена", event -> dialog.close());

        VerticalLayout layout = new VerticalLayout(new Label(title), fileNameInput, okButton, cancelButton);
        layout.setPadding(false);
        layout.setSpacing(true);
        dialog.add(layout);
        dialog.open();
    }

    private void createFile(String fileName) {
        Integer a = aField.getValue();
        Integer b = bField.getValue();

        if (a == null || b == null || a > b) {
            Notification.show("Введите корректный диапазон a <= b");
            return;
        }

        Dialog dialog = new Dialog();
        dialog.setWidth("400px");
        dialog.setCloseOnEsc(true);
        dialog.setCloseOnOutsideClick(false);

        TextArea numbersInput = new TextArea("Введите числа (по одному на строке)");
        numbersInput.setWidthFull();
        numbersInput.setHeight("200px");
        numbersInput.setPlaceholder("Например:\n10\n25\n42");

        Button saveButton = new Button("Сохранить", event -> {
            String text = numbersInput.getValue();
            if (text == null || text.trim().isEmpty()) {
                Notification.show("Введите хотя бы одно число");
                return;
            }

            try (DataOutputStream dos = new DataOutputStream(new FileOutputStream(fileName))) {
                dos.writeInt(a);
                dos.writeInt(b);

                String[] lines = text.split("\n");
                int count = 0;
                List<String> errors = new ArrayList<>();

                for (String line : lines) {
                    line = line.trim();
                    if (line.isEmpty()) continue;

                    try {
                        int val = Integer.parseInt(line);
                        if (val < a || val > b) {
                            errors.add("Число " + val + " вне диапазона [" + a + ", " + b + "]");
                            continue;
                        }
                        dos.writeInt(val);
                        count++;
                    } catch (NumberFormatException e) {
                        errors.add("Некорректное число: " + line);
                    }
                }

                dialog.close();

                if (!errors.isEmpty()) {
                    Notification.show("Предупреждения: " + String.join(", ", errors));
                }

                if (count > 0) {
                    Notification.show("Файл создан с " + count + " элементами");
                    outputArea.clear();
                    primesArea.clear();
                } else {
                    Notification.show("Не записано ни одного корректного числа");
                }

            } catch (IOException ex) {
                Notification.show("Ошибка записи файла: " + ex.getMessage());
                dialog.close();
            }
        });

        Button cancelButton = new Button("Отмена", event -> dialog.close());

        VerticalLayout layout = new VerticalLayout(
                new Label("Введите числа в диапазоне [" + a + ", " + b + "]"),
                numbersInput,
                new HorizontalLayout(saveButton, cancelButton)
        );
        layout.setPadding(false);
        layout.setSpacing(true);

        dialog.add(layout);
        dialog.open();
    }

    private void openFile(String fileName) {
        if (!Files.exists(Paths.get(fileName))) {
            Notification.show("Файл не найден");
            return;
        }
        try (DataInputStream dis = new DataInputStream(new FileInputStream(fileName))) {
            dis.readInt();
            dis.readInt();

            StringBuilder sb = new StringBuilder();
            while (dis.available() >= 4) {
                int val = dis.readInt();
                sb.append(val).append("\n");
            }
            outputArea.setValue(sb.toString());
            primesArea.clear();
            Notification.show("Файл успешно открыт");
        } catch (IOException ex) {
            Notification.show("Ошибка чтения файла: " + ex.getMessage());
        }
    }

    private void showMutualPrimes(String fileName) {
        if (!Files.exists(Paths.get(fileName))) {
            Notification.show("Файл не найден");
            return;
        }

        try (DataInputStream dis = new DataInputStream(new FileInputStream(fileName))) {
            int a = dis.readInt();
            int b = dis.readInt();

            List<Integer> numbers = new ArrayList<>();
            while (dis.available() >= 4) {
                int val = dis.readInt();
                numbers.add(val);
            }

            TreeSet<Integer> mutualPrimes = new TreeSet<>();
            for (int i = 0; i < numbers.size(); i++) {
                int current = numbers.get(i);
                boolean isMutualPrime = true;

                for (int j = 0; j < numbers.size(); j++) {
                    if (i != j) {
                        int other = numbers.get(j);
                        if (gcd(current, other) != 1) {
                            isMutualPrime = false;
                            break;
                        }
                    }
                }

                if (isMutualPrime) {
                    mutualPrimes.add(current);
                }
            }

            StringBuilder sb = new StringBuilder();
            for (Integer num : mutualPrimes) {
                sb.append(num).append("\n");
            }

            primesArea.setValue(sb.length() == 0 ? "Нет взаимно простых чисел" : sb.toString());

        } catch (IOException ex) {
            Notification.show("Ошибка обработки файла: " + ex.getMessage());
        }
    }

    private int gcd(int a, int b) {
        a = Math.abs(a);
        b = Math.abs(b);
        while (b != 0) {
            int temp = b;
            b = a % b;
            a = temp;
        }
        return a;
    }
}

```
# Результат
![[Assets/Pasted image 20251016144416.png]]