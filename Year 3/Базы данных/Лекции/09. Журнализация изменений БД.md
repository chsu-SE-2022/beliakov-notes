# Журнализация изменений БД
Для восстановления после программных и аппаратных сбоев поддерживается журнал изменений БД.
Восстановления требуются, если 
- Индивидуальный откат транзакций: завершение оператором `ROLLBACK`, откат транзакции по инициативе СУБД, исключительные ситуации в программе. Происходит выбор транзакции в качестве жертвы
- Потеря содержимого оперативной памяти при сбое
- При сбое процессора
- Поломка ПЗУ
В основе восстановления - хранение избыточных данных в журнале изменений БД и в архивной копии

![](TransactionScenarios.png)

В журнале отображаются точки физ. согласованности - моменты времени, когда во внешней памяти содержатся согласованные результаты операций завершившихся до мягкого сбоя и отсутствуют результаты незавершённых операций

### Что сделать для восстановления?
Т1 - ничего, транзакция полностью записана
Т2 - повторно выполнить оставшуюся часть транзакции
Т3 - выполняется в обратном направлении первая часть операции. В ОЗУ нет результатов Т3 после точки физ согласованности, но есть результаты до неё
Т4 - полная повторная прямая интерпретация операции
Т5 - ничто не поможет, результаты не сохранены, к последовательности команд нужно обращаться заново
