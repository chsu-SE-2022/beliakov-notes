При проектировании БД решаются две проблемы:
1. Как отобразить объекты предметной области в абстрактные объекты модели данных. Это проблема логического проектирования
2. Как обеспечить эффективность выполнения запросов к БД (расположить данные в ПЗУ, учитывая особенности СУБД), создание каких дополнительных структур требовать. Это проблема физического проектирования
Решается вопрос отношений и их атрибутов

# Нормализация
Проектирование реляционных БД производится методом последовательных приближений к удовлетворительному набору схем отношений. Исходная точка является представлением предметной области в виде одного или нескольких отношений.  
**Процесс проектирования** - это процесс нормализации схем отношений, причем каждая следующая **нормальная форма (НФ/NF)** обладает свойствами лучшими, чем предыдущая.  
Каждой НФ соответствует некоторый определенный набор ограничений.  
Существуют такие нормальные формы:
- Первая НФ (1НФ/[1NF](https://en.wikipedia.org/wiki/First_normal_form)) - все значения атомарны и скалярны
- Вторая НФ (2НФ/[2NF](https://en.wikipedia.org/wiki/Second_normal_form)) - все атрибуты зависят от ключевого
- Третья НФ (3НФ/[3NF](https://en.wikipedia.org/wiki/Third_normal_form)) - каждый неключевой атрибут нетранзитивно зависит от первичного ключа
- НФ элементарных ключей ([EKNF](https://en.wikipedia.org/wiki/Elementary_key_normal_form)) - каждый неключевой атрибут зависит от атомарног о первичного ключа 
- НФ Бойса-Кодда ([BCNF](https://en.wikipedia.org/wiki/Boyce%E2%80%93Codd_normal_form))
- Четвертая НФ (4НФ/[4NF](https://en.wikipedia.org/wiki/Fourth_normal_form))
- НФ существенных кортежей ([ETNF](https://en.wikipedia.org/wiki/Essential_tuple_normal_form))
- Пятая НФ (5НФ/[5NF](https://en.wikipedia.org/wiki/Fifth_normal_form))
- НФ домен-ключ ([DKNF](https://en.wikipedia.org/wiki/Domain-key_normal_form))
- Шестая НФ (6НФ/[6NF](https://en.wikipedia.org/wiki/Sixth_normal_form))
## Основные свойства нормальных форм
- Каждая следующая НФ в некотором смысле лучше предыдущей
- При переходе к следующей НФ свойства предыдущих НФ сохраняются
  
**Нормализация** - это декомпозиция отношения, находящегося в предыдущей НФ в два или более отношений, удовлетворяющих требованиям следующей НФ.  
Нормализацию часто завершают на 3НФ.  
При использовании ненормализованных таблиц возможны проблемы: избыточность данных, аномалии обновления, удаления, ввода.

# Пример нормализации
**Исходные данные**  
Предметная область: отдел кадров учреждения  
Сущность: book  

| ***Title*** | Author | Author Nationality | *Format* | Price | Subject | Pages | Thickness | Publisher | Publisher Country | Genre ID | Genre Name |
| ----------- | ------ | ------------------ | -------- | ----- | ------- | ----- | --------- | --------- | ----------------- | -------- | ---------- |
![](UNF.png)
## Первая нормальная форма
Значения атрибутов отношения должны быть атомарны (неделимы).
Сущность: Books

| Title | Author | Author Nationality | Format | Price | Pages | Thickness | Publisher | Publisher Country | Genre ID | Genre Name |
| ----- | ------ | ------------------ | ------ | ----- | ----- | --------- | --------- | ----------------- | -------- | ---------- |
Сущность: Title-Subject

| **Title** | **Subject name** |
| --------- | ---------------- |
![](1NF.png)
## Вторая нормальная форма
Отношение находится во 2НФ в том и только в том случае, когда отношение находится в 1НФ и каждый неключевой атрибут полностью зависит от первичного ключа.  
**Алгоритм трансформации:**
1. Определить, на какие части можно разбить первичный ключ так, чтобы некоторые из неключевых полей зависели от одной из этих частей.
2. Создать новую таблицу для каждой такой части ключа и группы зависящих от нее полей и переместить их в эти таблицы. Часть бывшего первичного ключа при этом станет первичным ключом новой таблицы.
3. Удалить из исходной таблицы поля, перемещенные в другую таблицу, кроме тех, которые станут внешними ключами.
Нормализацию часто завершают на 3НФ

При использовании ненормализованных таблиц возможны проблемы: избыточность данных, аномалии обновления, удаления, ввода

Book:

|Title|Author|Author Nationality|Pages|Thickness|Publisher|Publisher Country|Genre ID|Genre Name|
|---|---|---|---|---|---|---|---|---|

Price:

| Title | Format | Price |
| ----- | ------ | ----- |
![](2NF.png)

## Третья нормальная форма
Отношение находится в 3НФ в том и только в том случае, когда отношение находится во 2НФ и каждый неключевой атрибут нетранзитивно зависит от первичного ключа.  
Выявляется и обнаруживается, есть функциональная зависимость между атрибутами код сотрудника и зарплата, она транзитивная. Предлагается сущность сотрудники разбить на сущности сотрудники и должности.  

Book:

| Title | Author | Pages | Thickness | Publisher | Genre ID |
| ----- | ------ | ----- | --------- | --------- | -------- |

Price:

|Title|Format|Price|
|---|---|---|

Subject:

| **Title** | **Subject name** |
| --------- | ---------------- |

Author:

|Author|Author Nationality|
|---|---|

Publisher:

|Publisher|Country|
|---|---|

Genre:

|Genre ID|Name|
|---|---|

![](3NF.png)
