![[Pasted image 20250219113056.png]]
# Без использования внешней памяти
## Распределение фиксированными разделами
При инсталляции ОС вся физическая память делится на разделы фиксированной длины, после чего количество разделов и их размеры остаются неизменными. Таким образом, количество одновременно выполняемых задач не более числа разделов, размер самой большой - не более размера раздела
Плюсы - простота и скорость
Минусы - очереди
## Распределение динамическими разделами
Размеры определяются при запросе от программы
Минусы - фрагментация памяти
## Распределение перемещаемыми разделами
Когда процесс освобождает физическую память, все процессы "выше" сдвигаются ЛИБО процессы сдвигаются, когда новый не помещается
# С использованием внешней памяти
## Страничное распределение памяти
Всё виртуальное адресное пространство разделяется на страницы фиксированного размера. На аналогичные страницы разбивается и вся физическая память. Когда процесс поступает в ОС, диспетчер памяти должен разместить каждую страницу процесса в физической памяти. Если физической памяти для всех страниц не хватает, они располагаются в специальном файле (или разделе файловой системы) swap. В любом случае, текущая страница процесса должна находиться в физической памяти. Для того чтобы корректно работать, ОС для каждого процесса заводит таблицу страниц, где для каждой виртуальной страницы записано, присутствует ли она в физической памяти, а также её адрес. Такие таблицы бывают двух видов - глобальные или локальные (Global Descriptor Table / Local Descriptor Table). Адреса таких таблиц находятся в GDTR/LDTR, команды работы с которыми являются привилегированными
![[Pasted image 20250226092536.png]]
Стандарный размер страницы - 4кб
Может случиться так, что страница находится во внешней памяти, а места в оперативной памяти нет. В таком случае, из оперативной памяти нужно выгрузить страницу во внешнюю память, а текущую загрузить
Для выбора выгружаемых страниц существует несколько алгоритмов:
1. FIFO
2. LRU
3. LFU
4. Random

Плюсы - все страницы одинакового размера, т.е. нет фрагментации
Минусы - замедление вычисления физ. адреса засчёт страничного механизма; Код и данные процесса делятся на страницы без учёта логической структуры, что приводит к частым межстраничным переходам
## Сегментное распределение памяти
При этом механизме виртуальное адресное пространство делится не на страницы одинаковых размеров, а на логические сегменты. В таблице дескрипторов сегментов процесса нужно указывать начальный адрес сегмента, его размер, адрес начала физ. сегмента, права доступа
![[Pasted image 20250226095525.png]]
Плюсы - деление на логические сегменты => реже межсегментные переходы; возможность создания разделяемых сегментов
Минус - фрагментация
## Сегментно-страничное распределение памяти
Всё виртуальное адресное пространство делится на логические сегменты, что позволяет использовать плюсы [[#Сегментное распределение памяти|сегментного механизма]], но перемещение памяти между внешней и физической происходит страницами, для чего каждый сегмент делится на страницы
![[Pasted image 20250226102342.png]]